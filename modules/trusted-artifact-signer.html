<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installing and Configuring Red Hat Trusted Artifact Signer on RHEL :: Red Hat Advanced Developer Suite Enablement L3 RHEL</title>
    <link rel="canonical" href="https://redhat-ads-tech.github.io/rhads-enablement-l3-rhel/modules/trusted-artifact-signer.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="trusted-profile-analyzer.html">
    <meta name="generator" content="Antora 3.1.13">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://demo.redhat.com" target="_blank" style="margin-left: 5%;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1508.5 178.739" style="width: 278px;"><g fill="#fff"><path d="M316.6 63.2v-56H342a21.279 21.279 0 0 1 7.8 1.3 18.111 18.111 0 0 1 5.9 3.5 15.577 15.577 0 0 1 5 11.8 15.051 15.051 0 0 1-3.1 9.5 16.836 16.836 0 0 1-8.4 5.8l12.5 24.1h-9.3l-11.6-23H325v23Zm24.7-48.6H325v18.7h16.3q5.25 0 8.1-2.7a8.7 8.7 0 0 0 2.8-6.6 8.7 8.7 0 0 0-2.8-6.6c-1.8-1.9-4.5-2.8-8.1-2.8ZM364.1 42.8a20.674 20.674 0 0 1 1.6-8.2 20.288 20.288 0 0 1 4.3-6.7 19.92 19.92 0 0 1 6.5-4.5 19.718 19.718 0 0 1 8-1.6 18.463 18.463 0 0 1 7.8 1.6 18.677 18.677 0 0 1 6.2 4.5 20.927 20.927 0 0 1 4.1 6.8 23.2 23.2 0 0 1 1.5 8.4v2.3H372a13.822 13.822 0 0 0 4.6 8.4 13.6 13.6 0 0 0 9.1 3.3 15.553 15.553 0 0 0 5.7-1 12.858 12.858 0 0 0 4.6-2.6l5.1 5a25.983 25.983 0 0 1-7.4 4.1 24.69 24.69 0 0 1-8.4 1.3 21.306 21.306 0 0 1-8.4-1.6 22.763 22.763 0 0 1-6.8-4.4 20.788 20.788 0 0 1-4.5-6.7 23.2 23.2 0 0 1-1.5-8.4Zm20.2-14.2a11.527 11.527 0 0 0-8 3 13.046 13.046 0 0 0-4.2 7.8h24.2a13.091 13.091 0 0 0-4.2-7.8 11.106 11.106 0 0 0-7.8-3ZM443.1 63.2v-3.8a19.448 19.448 0 0 1-5.8 3.3 18.924 18.924 0 0 1-6.7 1.2 19.824 19.824 0 0 1-14.6-6.1 22.268 22.268 0 0 1-4.4-6.7 21.812 21.812 0 0 1 0-16.4A20.534 20.534 0 0 1 416 28a19.335 19.335 0 0 1 6.6-4.5 20.334 20.334 0 0 1 8.2-1.6 20.7 20.7 0 0 1 6.6 1 19.415 19.415 0 0 1 5.7 3V7.2l8-1.8v57.8Zm-25.2-20.4a13.718 13.718 0 0 0 4 10.1 13.45 13.45 0 0 0 9.8 4.1 14.956 14.956 0 0 0 6.4-1.3 15.954 15.954 0 0 0 4.9-3.6V33.6a14.988 14.988 0 0 0-4.9-3.5 15.271 15.271 0 0 0-6.4-1.3 13.423 13.423 0 0 0-9.9 4 13.806 13.806 0 0 0-3.9 10ZM478.1 63.2v-56h8.4v24h29.8v-24h8.4v56h-8.4V38.8h-29.8v24.4ZM547.2 64a16.483 16.483 0 0 1-10.8-3.5 11.037 11.037 0 0 1-4.2-8.9 10.375 10.375 0 0 1 4.7-9.2 20.76 20.76 0 0 1 11.8-3.2 27.841 27.841 0 0 1 5.8.6 27.374 27.374 0 0 1 5.3 1.6v-4.3a8.143 8.143 0 0 0-2.6-6.5 11.452 11.452 0 0 0-7.4-2.2 20.788 20.788 0 0 0-6 .9 34.616 34.616 0 0 0-6.6 2.6l-3-6a54.169 54.169 0 0 1 8.4-3.1 33.18 33.18 0 0 1 8.3-1.1c5.2 0 9.3 1.3 12.2 3.8s4.4 6.1 4.4 10.8v27h-7.8v-3.5a19.441 19.441 0 0 1-5.8 3.2 23.54 23.54 0 0 1-6.7 1Zm-7.3-12.6a5.646 5.646 0 0 0 2.6 4.8 11.193 11.193 0 0 0 6.6 1.8 16.256 16.256 0 0 0 5.9-1 14.449 14.449 0 0 0 4.9-2.9V47a19.778 19.778 0 0 0-4.8-1.8 24.933 24.933 0 0 0-5.7-.6 11.859 11.859 0 0 0-6.8 1.8 5.728 5.728 0 0 0-2.7 5ZM580.6 53.2v-24H572v-6.7h8.6V12.1l7.9-1.9v12.3h12v6.7h-12v22.1a5.94 5.94 0 0 0 1.4 4.4c.9.9 2.5 1.3 4.6 1.3a23.637 23.637 0 0 0 3-.2 10.857 10.857 0 0 0 2.8-.8v6.7a19.28 19.28 0 0 1-3.8.9 27.484 27.484 0 0 1-3.8.3c-3.9 0-7-.9-9-2.8-2-1.7-3.1-4.4-3.1-7.9Z"></path></g><path d="M127 90.2c12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4L149.8 37c-1.7-7.1-3.2-10.3-15.7-16.6-9.7-5-30.8-13.1-37.1-13.1-5.8 0-7.5 7.5-14.4 7.5-6.7 0-11.6-5.6-17.9-5.6-6 0-9.9 4.1-12.9 12.5 0 0-8.4 23.7-9.5 27.2a4.216 4.216 0 0 0-.3 1.9c0 9.2 36.3 39.4 85 39.4Zm32.5-11.4c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3C21.8 58.8 0 61.8 0 81c0 31.5 74.6 70.3 133.7 70.3 45.3 0 56.7-20.5 56.7-36.6-.1-12.8-11-27.3-30.9-35.9Z" fill="#e00"></path><path d="M159.5 78.8c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3l3.7-9.1a4.877 4.877 0 0 0-.3 2c0 9.2 36.3 39.4 85 39.4 12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4Z"></path><path d="M253.5 158.7a2.22 2.22 0 0 1-2.2-2.2V2.2a2.2 2.2 0 0 1 4.4 0v154.2a2.242 2.242 0 0 1-2.2 2.3Z" fill="#fff"></path><text data-name="Demo Platform" transform="translate(1186 149)" fill="#fff" font-size="82" font-family="'RedHatDisplay', 'Overpass', overpass, helvetica, arial, sans-serif" font-weight="700"><tspan x="-877.892" y="0">Demo Platform</tspan></text></svg>
      </a>
      <a class="navbar-item site-title" target="__blank" style="color: #fff !important;" href="https://redhat-ads-tech.github.io/rhads-enablement-l3-rhel">Red Hat Advanced Developer Suite Enablement L3 RHEL</a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item navbar-item-right-dropdown has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Links</a>
          <div class="navbar-dropdown navbar-dropdown-right">
            <a class="navbar-item navbar-item-right-content" href="https://redhat.com" target="_blank">Red Hat</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Red Hat Advanced Developer Suite Enablement L3 RHEL</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="trusted-artifact-signer.html">1. Installing and Configuring Red Hat Trusted Artifact Signer on RHEL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#prerequisites">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#installation">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#configuration">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="trusted-profile-analyzer.html">2. Installing and Configuring Red Hat Trusted Profile Analyzer on RHEL</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="trusted-profile-analyzer.html#prerequisites">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="trusted-profile-analyzer.html#installation">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="trusted-profile-analyzer.html#configuration">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Dev Mode</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="openshift-icons.html">openshift-icons</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="attrs-page.html">Attributes Page</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Red Hat Advanced Developer Suite Enablement L3 RHEL</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Red Hat Advanced Developer Suite Enablement L3 RHEL</a></li>
    <li><a href="trusted-artifact-signer.html">1. Installing and Configuring Red Hat Trusted Artifact Signer on RHEL</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Installing and Configuring Red Hat Trusted Artifact Signer on RHEL</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Trusted Artifact Signer is a comprehensive solution for signing and verifying software artifacts to ensure their integrity and authenticity. This module will guide you through the installation and configuration process on Red Hat Enterprise Linux using Red Hat Ansible Automation Platform.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RHTAS service is the downstream redistribution of the <a href="https://sigstore.dev/" target="_blank" rel="noopener">Sigstore project</a>. The automation contained in <a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/artifact_signer/docs" target="_blank" rel="noopener">the Ansible collection you will use</a> will install and configure the components of RHTAS to run on a single RHEL server, which uses a standalone containerized deployment. A Kubernetes-based manifest creates Kubernetes manifests for the containers and are deployed using <code>podman kube play</code>.</p>
</div>
<div class="paragraph">
<p>The RHTAS Ansible collection deploys the following RHTAS components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rekor - An immutable, tamper-evident transparency log for storing and verifying software supply chain metadata.</p>
<div class="ulist">
<ul>
<li>
<p>Trillian database - A Merkle tree–backed data store that underpins Rekor’s transparency log.</p>
</li>
<li>
<p>Optional: A self-managed MariaDB instance (for durable SQL storage), and a Redis instance(caching and service management) (both highly recommended for production deployments to simplify operations and offload service management, including data backup and restoration).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fulcio - A certificate authority that issues short-lived code-signing certificates tied to an OpenID Connect (OIDC) identity.</p>
</li>
<li>
<p>Certificate Log - A transparency log that records issued certificates for auditability and trust verification.</p>
</li>
<li>
<p>Timestamp Authority - A service that provides trusted cryptographic timestamps to prove when data or signatures existed.</p>
</li>
<li>
<p>The Update Framework (TUF) server - A secure distribution system that manages and delivers software updates with integrity and resilience against compromise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An <a href="https://www.nginx.com/" target="_blank" rel="noopener">NGINX</a> front end places an entrypoint to the various backend components. A set of self-signed certificates get generated at runtime to establishing secure communications.</p>
</div>
<div class="paragraph">
<p>This automation also deploys and configures a software load balancer as a central point of ingress. The ingress host names are as follows, where <code>&lt;base_hostname&gt;</code> is your deployment&#8217;s base hostname (for your environment, it will be set to <code>{base_hostname}</code>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://cli-server.&lt;base_hostname&gt" class="bare">https://cli-server.&lt;base_hostname&gt</a>;</code></p>
</li>
<li>
<p><code><a href="https://fulcio.&lt;base_hostname&gt" class="bare">https://fulcio.&lt;base_hostname&gt</a>;</code></p>
</li>
<li>
<p><code><a href="https://rekor.&lt;base_hostname&gt" class="bare">https://rekor.&lt;base_hostname&gt</a>;</code></p>
</li>
<li>
<p><code><a href="https://rekor-search.&lt;base_hostname&gt" class="bare">https://rekor-search.&lt;base_hostname&gt</a>;</code></p>
</li>
<li>
<p><code><a href="https://tsa.&lt;base_hostname&gt" class="bare">https://tsa.&lt;base_hostname&gt</a>;</code></p>
</li>
<li>
<p><code><a href="https://tuf.&lt;base_hostname&gt" class="bare">https://tuf.&lt;base_hostname&gt</a>;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Many options exist: <a href="https://console.redhat.com/ansible/automation-hub/repo/published/redhat/artifact_signer/docs/" class="bare">https://console.redhat.com/ansible/automation-hub/repo/published/redhat/artifact_signer/docs/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_trusted_artifact_signer"><a class="anchor" href="#_install_trusted_artifact_signer"></a>Install Trusted Artifact Signer</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_verify_trusted_artifact_signer_installation"><a class="anchor" href="#_verify_trusted_artifact_signer_installation"></a>Verify Trusted Artifact Signer installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After installation and configuration, you can verify that Red Hat Trusted Artifact Signer (RHTAS) is working correctly by signing and verifying test artifacts. This section covers signing and verifying test artifacts using the following methods: Cosign for container images, Gitsign for Git commits, and Conforma (Enterprise Contract) for policy validation.</p>
</div>
<div class="sect2">
<h3 id="_method_1_container_image_signing_and_verification_with_cosign"><a class="anchor" href="#_method_1_container_image_signing_and_verification_with_cosign"></a>Method 1: Container Image Signing and Verification with <code>cosign</code></h3>
<div class="paragraph">
<p><code>cosign</code> allows you to sign and verify Open Container Initiative (OCI) container images using RHTAS.</p>
</div>
<div class="sect3">
<h4 id="_download_and_install_cosign"><a class="anchor" href="#_download_and_install_cosign"></a>Download and Install Cosign</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the cosign binary from the CLI server web page:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Navigate to the CLI server (replace with your actual hostname)
# Example: https://cli-server.example.com</code></pre>
</div>
</div>
</li>
<li>
<p>Decompress and install the cosign binary:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gunzip cosign-amd64.gz
chmod +x cosign-amd64
sudo mv cosign-amd64 /usr/local/bin/cosign</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_configure_environment_variables"><a class="anchor" href="#_configure_environment_variables"></a>Configure Environment Variables</h4>
<div class="paragraph">
<p>Set up your shell environment for container image signing and verification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export BASE_HOSTNAME=BASE_HOSTNAME_OF_RHTAS_SERVICE
export TUF_URL="https://tuf.${BASE_HOSTNAME}"
export OIDC_ISSUER_URL=OIDC_ISSUER_URL
export COSIGN_FULCIO_URL="https://fulcio.${BASE_HOSTNAME}"
export COSIGN_REKOR_URL="https://rekor.${BASE_HOSTNAME}"
export COSIGN_MIRROR=$TUF_URL
export COSIGN_ROOT=$TUF_URL/root.json
export COSIGN_OIDC_CLIENT_ID="trusted-artifact-signer"
export COSIGN_OIDC_ISSUER=$OIDC_ISSUER_URL
export COSIGN_CERTIFICATE_OIDC_ISSUER=$OIDC_ISSUER_URL
export COSIGN_YES="true"
export SIGSTORE_FULCIO_URL=$COSIGN_FULCIO_URL
export SIGSTORE_OIDC_ISSUER=$COSIGN_OIDC_ISSUER
export SIGSTORE_REKOR_URL=$COSIGN_REKOR_URL
export REKOR_REKOR_SERVER=$COSIGN_REKOR_URL</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>BASE_HOSTNAME_OF_RHTAS_SERVICE</code> with your RHTAS service hostname and <code>OIDC_ISSUER_URL</code> with your OpenID Connect provider URL.</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_and_sign_a_test_image"><a class="anchor" href="#_create_and_sign_a_test_image"></a>Create and Sign a Test Image</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialize The Update Framework (TUF) system:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign initialize</code></pre>
</div>
</div>
</li>
<li>
<p>Create and push a test container image:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo "FROM scratch" &gt; ./tmp.Dockerfile
podman build . -f ./tmp.Dockerfile -t ttl.sh/rhtas/test-image:1h
podman push ttl.sh/rhtas/test-image:1h</code></pre>
</div>
</div>
</li>
<li>
<p>Sign the container image:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign sign -y ttl.sh/rhtas/test-image:1h</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A web browser will open for authentication. Sign with your email address.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clean up the temporary file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">rm ./tmp.Dockerfile</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_verify_the_signed_image"><a class="anchor" href="#_verify_the_signed_image"></a>Verify the Signed Image</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the signed container image:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign verify --certificate-identity=jdoe@redhat.com ttl.sh/rhtas/test-image:1h</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Replace <code>jdoe@redhat.com</code> with your actual signing email address.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_method_2_git_commit_signing_and_verification_with_gitsign"><a class="anchor" href="#_method_2_git_commit_signing_and_verification_with_gitsign"></a>Method 2: Git Commit Signing and Verification with Gitsign</h3>
<div class="paragraph">
<p>Gitsign enables signing and verification of Git repository commits using RHTAS.</p>
</div>
<div class="sect3">
<h4 id="_download_and_install_gitsign"><a class="anchor" href="#_download_and_install_gitsign"></a>Download and Install Gitsign</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the gitsign binary from the CLI server web page</p>
</li>
<li>
<p>Decompress and install:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gunzip gitsign-amd64.gz
chmod +x gitsign-amd64
sudo mv gitsign-amd64 /usr/local/bin/gitsign</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_configure_git_repository"><a class="anchor" href="#_configure_git_repository"></a>Configure Git Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your local Git repository:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /path/to/your/git/repository</code></pre>
</div>
</div>
</li>
<li>
<p>Configure Git to use gitsign for commit signing:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git config --local commit.gpgsign true
git config --local tag.gpgsign true
git config --local gpg.x509.program gitsign
git config --local gpg.format x509
git config --local gitsign.fulcio $SIGSTORE_FULCIO_URL
git config --local gitsign.rekor $SIGSTORE_REKOR_URL
git config --local gitsign.issuer $SIGSTORE_OIDC_ISSUER
git config --local gitsign.clientID trusted-artifact-signer</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_sign_and_verify_git_commit"><a class="anchor" href="#_sign_and_verify_git_commit"></a>Sign and Verify Git Commit</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make a test commit:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git commit --allow-empty -S -m "Test of a signed commit"</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A web browser will open for authentication.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the commit:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gitsign verify --certificate-identity=jdoe@redhat.com --certificate-oidc-issuer=$SIGSTORE_OIDC_ISSUER HEAD</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_method_3_policy_validation_with_conforma_enterprise_contract"><a class="anchor" href="#_method_3_policy_validation_with_conforma_enterprise_contract"></a>Method 3: Policy Validation with Conforma (Enterprise Contract)</h3>
<div class="paragraph">
<p>Conforma (formerly Enterprise Contract) validates container images against security policies.</p>
</div>
<div class="sect3">
<h4 id="_download_and_install_conforma"><a class="anchor" href="#_download_and_install_conforma"></a>Download and Install Conforma</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the ec binary from the CLI server web page</p>
</li>
<li>
<p>Decompress and install:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gunzip ec-amd64.gz
chmod +x ec-amd64
sudo mv ec-amd64 /usr/local/bin/ec</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_and_attest_test_image"><a class="anchor" href="#_create_and_attest_test_image"></a>Create and Attest Test Image</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a predicate.json file for SLSA provenance:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "builder": {
    "id": "https://localhost/dummy-id"
  },
  "buildType": "https://example.com/tekton-pipeline",
  "invocation": {},
  "buildConfig": {},
  "metadata": {
    "completeness": {
      "parameters": false,
      "environment": false,
      "materials": false
    },
    "reproducible": false
  },
  "materials": []
}</code></pre>
</div>
</div>
</li>
<li>
<p>Attach the predicate to your test image:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign attest -y --predicate ./predicate.json --type slsaprovenance ttl.sh/rhtas/test-image:1h</code></pre>
</div>
</div>
</li>
<li>
<p>Verify the image has attestations and signatures:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cosign tree ttl.sh/rhtas/test-image:1h</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_validate_with_conforma"><a class="anchor" href="#_validate_with_conforma"></a>Validate with Conforma</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run policy validation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ec validate image --image ttl.sh/rhtas/test-image:1h --certificate-identity-regexp 'jdoe@example.com' --certificate-oidc-issuer-regexp 'keycloak-system' --output yaml --show-successes</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This will generate a pass-fail report with security validation details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_additional_verification_tools"><a class="anchor" href="#_additional_verification_tools"></a>Additional Verification Tools</h3>
<div class="sect3">
<h4 id="_rekor_cli_for_transparency_log_queries"><a class="anchor" href="#_rekor_cli_for_transparency_log_queries"></a>Rekor CLI for Transparency Log Queries</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install rekor-cli:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gunzip rekor-cli-amd64.gz
chmod +x rekor-cli-amd64
sudo mv rekor-cli-amd64 /usr/local/bin/rekor-cli</code></pre>
</div>
</div>
</li>
<li>
<p>Query the transparency log:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Search by log index
rekor-cli get --log-index 0 --rekor_server $COSIGN_REKOR_URL --format json | jq

# Search by email address
rekor-cli search --email jdoe@redhat.com --rekor_server $COSIGN_REKOR_URL --format json | jq

# Get transaction details by UUID
rekor-cli get --uuid UUID --rekor_server $COSIGN_REKOR_URL --format json | jq</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verification_checklist"><a class="anchor" href="#_verification_checklist"></a>Verification Checklist</h3>
<div class="paragraph">
<p>Use this checklist to ensure your RHTAS installation is working correctly:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> Cosign binary downloaded and installed</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Environment variables configured correctly</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> TUF system initialized successfully</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Test container image created and signed</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Container image signature verified</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Gitsign binary downloaded and installed</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Git repository configured for signing</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Test commit signed and verified</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Conforma binary downloaded and installed</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> SLSA provenance attestation created</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Policy validation completed successfully</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> Rekor transparency log accessible</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If all verification steps complete successfully, your RHTAS installation is working correctly and ready for production use.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Red Hat Trusted Artifact Signer installed and configured, you can now:
* Sign software artifacts
* Verify artifact integrity
* Integrate with your CI/CD pipelines
* Configure policy-based signing workflows</p>
</div>
<div class="paragraph">
<p>For more advanced configuration options, refer to the official Red Hat Trusted Artifact Signer documentation.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html" class="query-params-link">Red Hat Advanced Developer Suite Enablement L3 RHEL</a></span>
  <span class="next"><a href="trusted-profile-analyzer.html" class="query-params-link">2. Installing and Configuring Red Hat Trusted Profile Analyzer on RHEL</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>  </div>
</main>
</div>
<footer class="footer">
  <a href="https://demo.redhat.com" target="_blank" class="poweredBy"><p>Powered by</p><div class="labInfo_poweredBy" style="display: block; width: 260px;"><svg class="labInfo_poweredByLogo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1508.5 178.739"><g fill="#111"><path d="M316.6 63.2v-56H342a21.279 21.279 0 0 1 7.8 1.3 18.111 18.111 0 0 1 5.9 3.5 15.577 15.577 0 0 1 5 11.8 15.051 15.051 0 0 1-3.1 9.5 16.836 16.836 0 0 1-8.4 5.8l12.5 24.1h-9.3l-11.6-23H325v23Zm24.7-48.6H325v18.7h16.3q5.25 0 8.1-2.7a8.7 8.7 0 0 0 2.8-6.6 8.7 8.7 0 0 0-2.8-6.6c-1.8-1.9-4.5-2.8-8.1-2.8ZM364.1 42.8a20.674 20.674 0 0 1 1.6-8.2 20.288 20.288 0 0 1 4.3-6.7 19.92 19.92 0 0 1 6.5-4.5 19.718 19.718 0 0 1 8-1.6 18.463 18.463 0 0 1 7.8 1.6 18.677 18.677 0 0 1 6.2 4.5 20.927 20.927 0 0 1 4.1 6.8 23.2 23.2 0 0 1 1.5 8.4v2.3H372a13.822 13.822 0 0 0 4.6 8.4 13.6 13.6 0 0 0 9.1 3.3 15.553 15.553 0 0 0 5.7-1 12.858 12.858 0 0 0 4.6-2.6l5.1 5a25.983 25.983 0 0 1-7.4 4.1 24.69 24.69 0 0 1-8.4 1.3 21.306 21.306 0 0 1-8.4-1.6 22.763 22.763 0 0 1-6.8-4.4 20.788 20.788 0 0 1-4.5-6.7 23.2 23.2 0 0 1-1.5-8.4Zm20.2-14.2a11.527 11.527 0 0 0-8 3 13.046 13.046 0 0 0-4.2 7.8h24.2a13.091 13.091 0 0 0-4.2-7.8 11.106 11.106 0 0 0-7.8-3ZM443.1 63.2v-3.8a19.448 19.448 0 0 1-5.8 3.3 18.924 18.924 0 0 1-6.7 1.2 19.824 19.824 0 0 1-14.6-6.1 22.268 22.268 0 0 1-4.4-6.7 21.812 21.812 0 0 1 0-16.4A20.534 20.534 0 0 1 416 28a19.335 19.335 0 0 1 6.6-4.5 20.334 20.334 0 0 1 8.2-1.6 20.7 20.7 0 0 1 6.6 1 19.415 19.415 0 0 1 5.7 3V7.2l8-1.8v57.8Zm-25.2-20.4a13.718 13.718 0 0 0 4 10.1 13.45 13.45 0 0 0 9.8 4.1 14.956 14.956 0 0 0 6.4-1.3 15.954 15.954 0 0 0 4.9-3.6V33.6a14.988 14.988 0 0 0-4.9-3.5 15.271 15.271 0 0 0-6.4-1.3 13.423 13.423 0 0 0-9.9 4 13.806 13.806 0 0 0-3.9 10ZM478.1 63.2v-56h8.4v24h29.8v-24h8.4v56h-8.4V38.8h-29.8v24.4ZM547.2 64a16.483 16.483 0 0 1-10.8-3.5 11.037 11.037 0 0 1-4.2-8.9 10.375 10.375 0 0 1 4.7-9.2 20.76 20.76 0 0 1 11.8-3.2 27.841 27.841 0 0 1 5.8.6 27.374 27.374 0 0 1 5.3 1.6v-4.3a8.143 8.143 0 0 0-2.6-6.5 11.452 11.452 0 0 0-7.4-2.2 20.788 20.788 0 0 0-6 .9 34.616 34.616 0 0 0-6.6 2.6l-3-6a54.169 54.169 0 0 1 8.4-3.1 33.18 33.18 0 0 1 8.3-1.1c5.2 0 9.3 1.3 12.2 3.8s4.4 6.1 4.4 10.8v27h-7.8v-3.5a19.441 19.441 0 0 1-5.8 3.2 23.54 23.54 0 0 1-6.7 1Zm-7.3-12.6a5.646 5.646 0 0 0 2.6 4.8 11.193 11.193 0 0 0 6.6 1.8 16.256 16.256 0 0 0 5.9-1 14.449 14.449 0 0 0 4.9-2.9V47a19.778 19.778 0 0 0-4.8-1.8 24.933 24.933 0 0 0-5.7-.6 11.859 11.859 0 0 0-6.8 1.8 5.728 5.728 0 0 0-2.7 5ZM580.6 53.2v-24H572v-6.7h8.6V12.1l7.9-1.9v12.3h12v6.7h-12v22.1a5.94 5.94 0 0 0 1.4 4.4c.9.9 2.5 1.3 4.6 1.3a23.637 23.637 0 0 0 3-.2 10.857 10.857 0 0 0 2.8-.8v6.7a19.28 19.28 0 0 1-3.8.9 27.484 27.484 0 0 1-3.8.3c-3.9 0-7-.9-9-2.8-2-1.7-3.1-4.4-3.1-7.9Z"></path></g><path d="M127 90.2c12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4L149.8 37c-1.7-7.1-3.2-10.3-15.7-16.6-9.7-5-30.8-13.1-37.1-13.1-5.8 0-7.5 7.5-14.4 7.5-6.7 0-11.6-5.6-17.9-5.6-6 0-9.9 4.1-12.9 12.5 0 0-8.4 23.7-9.5 27.2a4.216 4.216 0 0 0-.3 1.9c0 9.2 36.3 39.4 85 39.4Zm32.5-11.4c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3C21.8 58.8 0 61.8 0 81c0 31.5 74.6 70.3 133.7 70.3 45.3 0 56.7-20.5 56.7-36.6-.1-12.8-11-27.3-30.9-35.9Z" fill="#e00"></path><path d="M159.5 78.8c1.7 8.2 1.7 9.1 1.7 10.1 0 14-15.7 21.8-36.4 21.8-46.8 0-87.7-27.4-87.7-45.5a17.535 17.535 0 0 1 1.5-7.3l3.7-9.1a4.877 4.877 0 0 0-.3 2c0 9.2 36.3 39.4 85 39.4 12.5 0 30.6-2.6 30.6-17.5a12.678 12.678 0 0 0-.3-3.4Z"></path><path d="M253.5 158.7a2.22 2.22 0 0 1-2.2-2.2V2.2a2.2 2.2 0 0 1 4.4 0v154.2a2.242 2.242 0 0 1-2.2 2.3Z" fill="#111"></path><text data-name="Demo Platform" transform="translate(1186 149)" fill="#111" font-size="82" font-family="'RedHatDisplay', 'Overpass', overpass, helvetica, arial, sans-serif" font-weight="700"><tspan x="-877.892" y="0">Demo Platform</tspan></text></svg></div></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
